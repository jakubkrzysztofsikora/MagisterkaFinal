<Controls:MetroWindow x:Name="Window"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:graphx="http://schemas.panthernet.ru/graphx/"
        xmlns:Commands="clr-namespace:Magisterka.VisualEcosystem.WindowCommands"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:VisualEcosystem="clr-namespace:Magisterka.VisualEcosystem"
        xmlns:Animation="clr-namespace:Magisterka.VisualEcosystem.Animation"
        xmlns:PathfindingDomain="clr-namespace:Magisterka.Domain.Graph.Pathfinding;assembly=Magisterka.Domain"
        xmlns:fa="http://schemas.fontawesome.io/icons/"
        xmlns:inputModals="clr-namespace:Magisterka.VisualEcosystem.InputModals"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        x:Class="Magisterka.MainWindow"
        mc:Ignorable="d"
        Icon="Images\graph.ico"
        ShowIconOnTitleBar="True"
        ShowTitleBar="True"
        Title="Graph Pathfinder">
    <Window.CommandBindings>
      <CommandBinding Command="Commands:CustomCommands.TakePathfindingStepCommand" CanExecute="TakePathfindingStepCanExecute" Executed="TakePathfindingStepExecuted" />
    </Window.CommandBindings>
    <Window.Resources>
      <ContextMenu x:Key="NodeContextMenu">
          <MenuItem Header="Set as starting point" Click="SetStartingPoint" Tag="" />
          <MenuItem Header="Set as target" Click="SetTargetPoint" Tag="" />
          <Separator/>
          <MenuItem Header="Delete Node" Click="DeleteNode" Tag="" />
      </ContextMenu>
      <ContextMenu x:Key="EdgeContextMenu">
        <MenuItem Header="Change Cost" Click="ChangeCost" Tag="" />
        <Separator/>
        <MenuItem Header="Delete Edge" Click="DeleteEdge" Tag="" />
      </ContextMenu>
       <ObjectDataProvider x:Key="pathfindingAlgorithms" MethodName="GetValues"
                          ObjectType="{x:Type sys:Enum}">
          <ObjectDataProvider.MethodParameters>
              <x:Type TypeName="PathfindingDomain:ePathfindingAlgorithms"/>
          </ObjectDataProvider.MethodParameters>
      </ObjectDataProvider>
      <ObjectDataProvider x:Key="animationSpeed" MethodName="GetValues"
                          ObjectType="{x:Type sys:Enum}">
          <ObjectDataProvider.MethodParameters>
              <x:Type TypeName="Animation:eAnimationSpeed"/>
          </ObjectDataProvider.MethodParameters>
      </ObjectDataProvider>
      <Style x:Key="ComboStyle" TargetType="{x:Type ComboBox}">
            <Setter Property="SelectedIndex" Value="0"/>
      </Style>
      <Style x:Key="HeaderLabel" TargetType="{x:Type Label}">
        <Setter Property="FontSize" Value="14" />
        <Setter Property="FontFamily" Value="Segoe UI" />
        <Setter Property="FontWeight" Value="Bold" />
      </Style>
    </Window.Resources>
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="1*"/>
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="3*"/>
        <ColumnDefinition Width="1*"/>
      </Grid.ColumnDefinitions>
      <Menu Grid.Row="0" Grid.Column="0" x:Name="Menu" >
        <MenuItem Header="{StaticResource GenerateGraph}" >
          <MenuItem Header="{StaticResource GenerateRandomGraph}"  Click="GenerateAGraph" />
        </MenuItem>
        <MenuItem Header="{StaticResource StartPathfinding}" >
          <MenuItem Header="{StaticResource PathfindingStep}" Command="Commands:CustomCommands.TakePathfindingStepCommand" />
          <MenuItem Header="{StaticResource PathfindingAll}" />
        </MenuItem>
      </Menu>
      <WrapPanel Grid.Row="1"
                       Grid.Column="0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top">
        <Controls:Tile HorizontalAlignment="Left" Title="New Node" 
                    TiltFactor="2"
                    Cursor="Hand"
                    Width="100" Height="100" >
        <fa:FontAwesome Icon="Neuter" FontSize="25" VerticalAlignment="Center" />
      </Controls:Tile>
      <Controls:Tile HorizontalAlignment="Left" Title="New Edge" 
                    TiltFactor="2"
                    Cursor="Hand"
                    Width="100" Height="100" >
        <fa:FontAwesome Icon="Minus" FontSize="25" VerticalAlignment="Center" />
      </Controls:Tile>
      </WrapPanel>
      <Controls:ProgressRing Grid.Row="2" Grid.Column="0" x:Name="ProgressRing" IsActive="True"/>
      <graphx:ZoomControl Grid.Row="2" Grid.Column="0" x:Name="ZoomControl">
            <VisualEcosystem:VisualMap x:Name="VisualMap"/>
       </graphx:ZoomControl>
      <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Vertical">
        <GroupBox Header="{StaticResource PathfindingHeader}" HorizontalAlignment="Stretch" >
          <StackPanel>
            <Label Content="{StaticResource SelectPathfindingAlgorithm}"></Label>
            <ComboBox
              x:Name="ChoosenAlgorithm"
	            HorizontalAlignment="Stretch"
	            VerticalAlignment="Top"
              Style="{StaticResource ComboStyle}"
	            ItemsSource="{Binding Source={StaticResource pathfindingAlgorithms}}" />

            <Label Content="{StaticResource SelectAnimationSpeed}"></Label>
            <ComboBox
	            HorizontalAlignment="Stretch"
	            VerticalAlignment="Top"
              Style="{StaticResource ComboStyle}"
	            ItemsSource="{Binding Source={StaticResource animationSpeed}}" />
          </StackPanel>
	      </GroupBox>
        <GroupBox x:Name="AlgorithmStats" Header="{StaticResource StatsHeader}" HorizontalAlignment="Stretch" Visibility="Hidden">
          <StackPanel>
            <Label Style="{StaticResource HeaderLabel}" Content="{StaticResource PathDetailsHeader}"></Label>
            <Label Content="{StaticResource StepsTaken}"></Label>
            <Label x:Name="StepsTaken"></Label>
            <Button Style="{DynamicResource SquareButtonStyle}">Generate Excel</Button>
          </StackPanel>
	      </GroupBox>
      </StackPanel>
    </Grid>
</Controls:MetroWindow>
